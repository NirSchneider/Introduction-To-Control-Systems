
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>ex3</title><meta name="generator" content="MATLAB 9.7"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2021-11-10"><meta name="DC.source" content="ex3.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h2>Contents</h2><div><ul><li><a href="#1">Student ID</a></li><li><a href="#2">1 System modeling</a></li><li><a href="#3">2 System modeling 2</a></li><li><a href="#4">3 Comparing two systems</a></li><li><a href="#6">4 State-system response</a></li><li><a href="#8">5 State-system response 2</a></li></ul></div><h2 id="1">Student ID</h2><pre class="codeinput">ID = 316098052;
disp(ID)
</pre><pre class="codeoutput">   316098052

</pre><h2 id="2">1 System modeling</h2><p>The system's equations are:</p><p><img src="ex3_eq13328886597970410264.png" alt="$$\left(M+m\right)\ddot{x}+MLcos\theta\ddot{\theta}-MLsin\theta\dot{\theta}^{2}=-kx$$" style="width:278px;height:18px;"></p><p><img src="ex3_eq13119057617414037578.png" alt="$$gsin\theta+cos\theta\ddot{x}+L\ddot{\theta}=0$$" style="width:151px;height:17px;"></p><p>approximations - small thethas and derivative :</p><p><img src="ex3_eq02614713376244751180.png" alt="$$\left(M+m\right)\ddot{x}+ML\ddot{\theta}=-kx$$" style="width:166px;height:18px;"></p><p><img src="ex3_eq06094071467974458984.png" alt="$$\ddot{x}+L\ddot{\theta}=-g\theta$$" style="width:89px;height:17px;"></p><p>The state variable differential matrix equation:</p><p><img src="ex3_eq07586526658149826866.png" alt="$$\dot{x}=\left[\begin{array}{cccc}&#xA;                  0 &amp; 1 &amp; 0 &amp; 0\\&#xA;                  -\frac{k}{m} &amp; 0 &amp; g\frac{M}{m} &amp; 0\\&#xA;                  0 &amp; 0 &amp; 0 &amp; 1\\&#xA;                  \frac{k}{Lm} &amp; 0 &amp; \frac{-g\left(M+m\right)}{Lm} &amp; 0&#xA;                  \end{array}\right]\cdot x$$" style="width:216px;height:73px;"></p><h2 id="3">2 System modeling 2</h2><p>the system's equation are:</p><p><img src="ex3_eq02458530873497419846.png" alt="$$f-mg=ma$$" style="width:86px;height:14px;"></p><p>KVL:</p><p><img src="ex3_eq18267272884455167509.png" alt="$$L\dot{i}=v-iR$$" style="width:76px;height:14px;"></p><p>The state variable differential matrix equation:</p><p><img src="ex3_eq05075253065714518865.png" alt="$$\left[\begin{array}{c}&#xA;                \dot{x}_{1}\\&#xA;                \dot{x}_{2}\\&#xA;                \dot{x}_{3}&#xA;                \end{array}\right]=\left[\begin{array}{c}&#xA;                x_{2}\\&#xA;                \frac{k}{m}\left(\frac{I_{0}+x_{3}}{X_{0}+x_{1}}\right)^{2}-g\\&#xA;                \frac{1}{L}\left(-Rx_{3}+v\right)&#xA;                \end{array}\right]$$" style="width:191px;height:63px;"></p><p>approximation - linear near the working point:</p><p><img src="ex3_eq12998551027439594966.png" alt="$$Taylor\;:\qquad\frac{k}{m}\left(\frac{I_{0}+x_{3}}{X_{0}+x_{1}}\right)^{2}\cong\frac{k}{m}\left(-\frac{I_{0}^{2}}{X_{0}^{3}}x_{1}+\frac{I_{0}}{X_{0}^{2}}x_{3}\right)$$" style="width:351px;height:39px;"></p><p>The linear state variable differential matrix equation:</p><p><img src="ex3_eq14127856759325935738.png" alt="$$\left[\begin{array}{c}&#xA;            \dot{x}_{1}\\&#xA;            \dot{x}_{2}\\&#xA;            \dot{x}_{3}&#xA;            \end{array}\right]=\left[\begin{array}{ccc}&#xA;            0 &amp; 1 &amp; 0\\&#xA;            -\frac{k}{m}\frac{I_{0}^{2}}{X_{0}^{3}} &amp; 0 &amp; \frac{k}{m}\frac{I_{0}}{X_{0}^{2}}\\&#xA;            0 &amp; 0 &amp; -\frac{R}{L}&#xA;            \end{array}\right]\cdot\left[\begin{array}{c}&#xA;            x_{1}\\&#xA;            x_{2}\\&#xA;            x_{3}&#xA;            \end{array}\right]+\left[\begin{array}{c}&#xA;            0\\&#xA;            0\\&#xA;            \frac{1}{L}&#xA;            \end{array}\right]\cdot v$$" style="width:345px;height:62px;"></p><p>The charcterized matrices and vectors of the system:</p><p><img src="ex3_eq09248016397700679215.png" alt="$$C=\left[\begin{array}{ccc}&#xA;                    1 &amp; 0 &amp; 0\end{array}\right]\qquad B=\left[\begin{array}{c}&#xA;                    0\\&#xA;                    0\\&#xA;                    \frac{1}{L}&#xA;                    \end{array}\right]\qquad A=\left[\begin{array}{ccc}&#xA;                    0 &amp; 1 &amp; 0\\&#xA;                    -\frac{k}{m}\frac{I_{0}^{2}}{X_{0}^{3}} &amp; 0 &amp; \frac{k}{m}\frac{I_{0}}{X_{0}^{2}}\\&#xA;                    0 &amp; 0 &amp; -\frac{R}{L}&#xA;                    \end{array}\right]$$" style="width:417px;height:62px;"></p><p>Transfer function at Laplace plane:</p><p><img src="ex3_eq09960075243623941713.png" alt="$$H\left(S\right)=\frac{X\left(s\right)}{V\left(s\right)}=C\left[sI-A\right]^{-1}B=\frac{18.19}{s^{3}+45.67s^{2}+2246s+102600}$$" style="width:422px;height:35px;"></p><pre class="codeinput">L = 0.508;
R = 23.2;
I_0 = 1.06;
M = 1.75;
X_0 = 4.36*10^-3;
K = 2.9*10^-4;

A = [0 1 0; (-K*I_0^2)/(M*X_0^3) 0 (K*I_0)/(M*X_0^2); 0 0 -R/L];
B = [0 0 1/L]';
C = [1 0 0];
D = 0;

sys = ss(A, B, C, D);
tf(sys)
</pre><pre class="codeoutput">
ans =
 
                 18.19
  -----------------------------------
  s^3 + 45.67 s^2 + 2247 s + 1.026e05
 
Continuous-time transfer function.

</pre><h2 id="4">3 Comparing two systems</h2><pre class="codeinput">A_1 = [0 1 0;0 0 1; -4 -5 -8];
B_1 = [0 0 4]';
C_1 = [1 0 0];
D_1 = 0;

sys1 = ss(A_1, B_1, C_1, D_1);
tf_sys1 = tf(sys1)

A_2 = [0.5 0.5 0.7071;-0.5 -0.5 0.7071; -6.364 -0.7071 -8];
B_2 = [0 0 4]';
C_2 = [0.7071 1.2929 0];
D_2 = 0;

sys2 = ss(A_2, B_2, C_2, D_2);
tf_sys2 = tf(sys2)
</pre><pre class="codeoutput">
tf_sys1 =
 
            4
  ---------------------
  s^3 + 8 s^2 + 5 s + 4
 
Continuous-time transfer function.


tf_sys2 =
 
     5.657 s - 1.657
  ---------------------
  s^3 + 8 s^2 + 5 s + 4
 
Continuous-time transfer function.

</pre><p>The two systems has the same transfer function.</p><h2 id="6">4 State-system response</h2><pre class="codeinput">A_1 = [0 1 ;-2 -3];
B_1 = [0 1]';
C_1 = [1 0];
D_1 = 0;
x_0 = [1 0]';
t = 0:0.04:8;  <span class="comment">% 201 points</span>
u_t = t*0;
sys1 = ss(A_1, B_1, C_1, D_1);
tf_sys1 = tf(sys1)

lsim(sys1,u_t,t,x_0)
</pre><pre class="codeoutput">
tf_sys1 =
 
        1
  -------------
  s^2 + 3 s + 2
 
Continuous-time transfer function.

</pre><img vspace="5" hspace="5" src="ex3_01.png" alt=""> <p>The reponse type is ZIR, so the transfer function converge to constant value and in this case to zero, as expected.</p><h2 id="8">5 State-system response 2</h2><pre class="codeinput">A_1 = [0 1 0 ;0 0 1; -3 -2 -5];
B_1 = [0 0 1]';
C_1 = [1 0 0];
D_1 = 0;
x_0 = [0 -1 1]';
t = 0:0.04:10;
u_t = t*0;
sys1 = ss(A_1, B_1, C_1, D_1);
tf_sys1 = tf(sys1)

lsim(sys1,u_t,t,x_0)

t = 10;
[V, D] = eig(A_1*t);

TM = (V*diag(exp(diag(D))))* inv(V);

x_10 = TM*x_0
</pre><pre class="codeoutput">
tf_sys1 =
 
            1
  ---------------------
  s^3 + 5 s^2 + 2 s + 3
 
Continuous-time transfer function.


x_10 =

  -0.2545 + 0.0000i
   0.0418 + 0.0000i
   0.1500 - 0.0000i

</pre><img vspace="5" hspace="5" src="ex3_02.png" alt=""> <p><img src="ex3_eq01923653110112578773.png" alt="$$x\left(t\right)$" style="width:26px;height:15px;"> after 10 seconds get smaller and converge to zero and it fit with the response that is shown at section 2.</p><p class="footer"><br><a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2019b</a><br></p></div><!--
##### SOURCE BEGIN #####
%% Student ID
ID = 316098052;
disp(ID)
%% 1 System modeling
% The system's equations are:
%
% $$\left(M+m\right)\ddot{x}+MLcos\theta\ddot{\theta}-MLsin\theta\dot{\theta}^{2}=-kx$$
%
% $$gsin\theta+cos\theta\ddot{x}+L\ddot{\theta}=0$$
%
% approximations - small thethas and derivative :
%
% $$\left(M+m\right)\ddot{x}+ML\ddot{\theta}=-kx$$
%
% $$\ddot{x}+L\ddot{\theta}=-g\theta$$
%
% The state variable differential matrix equation:
%
% $$\dot{x}=\left[\begin{array}{cccc}
%                   0 & 1 & 0 & 0\\
%                   -\frac{k}{m} & 0 & g\frac{M}{m} & 0\\
%                   0 & 0 & 0 & 1\\
%                   \frac{k}{Lm} & 0 & \frac{-g\left(M+m\right)}{Lm} & 0
%                   \end{array}\right]\cdot x$$
%
%% 2 System modeling 2
% the system's equation are:
%
% $$f-mg=ma$$
%
% KVL:
%
% $$L\dot{i}=v-iR$$
%
% The state variable differential matrix equation:
%
% $$\left[\begin{array}{c}
%                 \dot{x}_{1}\\
%                 \dot{x}_{2}\\
%                 \dot{x}_{3}
%                 \end{array}\right]=\left[\begin{array}{c}
%                 x_{2}\\
%                 \frac{k}{m}\left(\frac{I_{0}+x_{3}}{X_{0}+x_{1}}\right)^{2}-g\\
%                 \frac{1}{L}\left(-Rx_{3}+v\right)
%                 \end{array}\right]$$
%
% approximation - linear near the working point:
%
% $$Taylor\;:\qquad\frac{k}{m}\left(\frac{I_{0}+x_{3}}{X_{0}+x_{1}}\right)^{2}\cong\frac{k}{m}\left(-\frac{I_{0}^{2}}{X_{0}^{3}}x_{1}+\frac{I_{0}}{X_{0}^{2}}x_{3}\right)$$
%
% The linear state variable differential matrix equation:
%
% $$\left[\begin{array}{c}
%             \dot{x}_{1}\\
%             \dot{x}_{2}\\
%             \dot{x}_{3}
%             \end{array}\right]=\left[\begin{array}{ccc}
%             0 & 1 & 0\\
%             -\frac{k}{m}\frac{I_{0}^{2}}{X_{0}^{3}} & 0 & \frac{k}{m}\frac{I_{0}}{X_{0}^{2}}\\
%             0 & 0 & -\frac{R}{L}
%             \end{array}\right]\cdot\left[\begin{array}{c}
%             x_{1}\\
%             x_{2}\\
%             x_{3}
%             \end{array}\right]+\left[\begin{array}{c}
%             0\\
%             0\\
%             \frac{1}{L}
%             \end{array}\right]\cdot v$$
%
% The charcterized matrices and vectors of the system:
%
% $$C=\left[\begin{array}{ccc}
%                     1 & 0 & 0\end{array}\right]\qquad B=\left[\begin{array}{c}
%                     0\\
%                     0\\
%                     \frac{1}{L}
%                     \end{array}\right]\qquad A=\left[\begin{array}{ccc}
%                     0 & 1 & 0\\
%                     -\frac{k}{m}\frac{I_{0}^{2}}{X_{0}^{3}} & 0 & \frac{k}{m}\frac{I_{0}}{X_{0}^{2}}\\
%                     0 & 0 & -\frac{R}{L}
%                     \end{array}\right]$$
%
% Transfer function at Laplace plane:
%
% $$H\left(S\right)=\frac{X\left(s\right)}{V\left(s\right)}=C\left[sI-A\right]^{-1}B=\frac{18.19}{s^{3}+45.67s^{2}+2246s+102600}$$
%
L = 0.508;
R = 23.2;
I_0 = 1.06;
M = 1.75;
X_0 = 4.36*10^-3;
K = 2.9*10^-4;

A = [0 1 0; (-K*I_0^2)/(M*X_0^3) 0 (K*I_0)/(M*X_0^2); 0 0 -R/L];
B = [0 0 1/L]';
C = [1 0 0];
D = 0;

sys = ss(A, B, C, D);
tf(sys)

%% 3 Comparing two systems
A_1 = [0 1 0;0 0 1; -4 -5 -8];
B_1 = [0 0 4]';
C_1 = [1 0 0];
D_1 = 0;

sys1 = ss(A_1, B_1, C_1, D_1);
tf_sys1 = tf(sys1)

A_2 = [0.5 0.5 0.7071;-0.5 -0.5 0.7071; -6.364 -0.7071 -8];
B_2 = [0 0 4]';
C_2 = [0.7071 1.2929 0];
D_2 = 0;

sys2 = ss(A_2, B_2, C_2, D_2);
tf_sys2 = tf(sys2)
%%
% The two systems has the same transfer function.
%
%% 4 State-system response
A_1 = [0 1 ;-2 -3];
B_1 = [0 1]';
C_1 = [1 0];
D_1 = 0;
x_0 = [1 0]';
t = 0:0.04:8;  % 201 points
u_t = t*0;
sys1 = ss(A_1, B_1, C_1, D_1);
tf_sys1 = tf(sys1)

lsim(sys1,u_t,t,x_0)
%%
% The reponse type is ZIR, so the transfer function converge to constant value and in this case to zero, as expected.  
%
%% 5 State-system response 2
A_1 = [0 1 0 ;0 0 1; -3 -2 -5];
B_1 = [0 0 1]';
C_1 = [1 0 0];
D_1 = 0;
x_0 = [0 -1 1]';
t = 0:0.04:10;  
u_t = t*0;
sys1 = ss(A_1, B_1, C_1, D_1);
tf_sys1 = tf(sys1)

lsim(sys1,u_t,t,x_0)

t = 10;
[V, D] = eig(A_1*t);

TM = (V*diag(exp(diag(D))))* inv(V);

x_10 = TM*x_0

%%
% $$x\left(t\right)$ after 10 seconds get smaller and converge to zero and it
% fit with the response that is shown at section 2.


##### SOURCE END #####
--></body></html>